# -*- coding: utf-8 -*-
"""app.py

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/174SyEDS-Xel78JqsZOVsPoTihxCrhkti
"""

import streamlit as st
import numpy as np
import pickle
from tensorflow.keras.models import load_model

# Load model and scaler
model = load_model("model.h5")
scaler = pickle.load(open("scaler.pkl", "rb"))

st.title("Credit Card Churn Prediction using ANN")

# User inputs
credit_score = st.number_input("Credit Score", 300, 900)
geography = st.selectbox("Geography", ["France", "Germany", "Spain"])
gender = st.selectbox("Gender", ["Male", "Female"])
age = st.number_input("Age", 18, 100)
tenure = st.number_input("Tenure (Years)", 0, 10)
balance = st.number_input("Account Balance")
num_products = st.number_input("Number of Products", 1, 4)
has_card = st.selectbox("Has Credit Card?", ["Yes", "No"])
active_member = st.selectbox("Is Active Member?", ["Yes", "No"])
salary = st.number_input("Estimated Salary")

# Encoding categorical values
geo_map = {"France": 0, "Germany": 1, "Spain": 2}
gender_map = {"Male": 1, "Female": 0}
yes_no_map = {"Yes": 1, "No": 0}

geography = geo_map[geography]
gender = gender_map[gender]
has_card = yes_no_map[has_card]
active_member = yes_no_map[active_member]

if st.button("Predict Churn"):
    input_data = np.array([[credit_score, geography, gender, age, tenure,
                            balance, num_products, has_card, active_member, salary]])

    input_data = scaler.transform(input_data)
    prediction = model.predict(input_data)

    if prediction[0][0] > 0.5:
        st.error("Customer is likely to churn ❌")
    else:
        st.success("Customer will NOT churn ✅")

